  <!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title> | Cheats by Kematzy</title>

    <link rel="stylesheet" href="/assets/css/styles.css">
    <!-- <link rel="stylesheet" href="/assets/css/-pygment_trac.css"> -->
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>


  <body>
    <div id="page" class="container">

      <nav id="header" class="navbar navbar-default">
  <div class="container-fluid row">

    <div class="navbar-header col-md-6">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand">
        <h1><a href="/">Cheats by Kematzy</a></h1>
        <p>A personal collection of Cheatsheets</p>
      </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse col-md-6" id="header-nav">
      <ul class="nav navbar-nav">
      
        
          
        <li class="">
          <a href="/index.html" title="back to the homepage">Home</a>
        </li>
        
        
          
        <li class="">
          <a href="/toc.html" title="full table of contents for this website">Table of Contents</a>
        </li>
        
        
          
        <li class="">
          <a href="/about.html" title="find out more information about this website">About</a>
        </li>
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


      


<div id="breadcrumbs" class="row">
  <div class="col-md-12">
    <ol class="breadcrumb">
      <li><a href="/">Home</a></li>
      
        
        <li><a href="/ruby/">Ruby</a></li>
      
        
        <li><a href="/ruby/gems/">Gems</a></li>
      
        
        <li><a href="/ruby/gems/rack_test.html">Rack_test</a></li>
      
    </ol>
  </div>
</div>


      <div id="page-contents" class="row">

        <div class="col-md-12">
          <hr>

<div id="toc"></div>

<hr>

<h2 id="introduction">Introduction</h2>

<p>Rack::Test <a href="https://codeclimate.com/github/brynary/rack-test"><img src="https://codeclimate.com/github/brynary/rack-test.png" /></a></p>

<p>Rack::Test is a small, simple testing API for Rack apps. It can be used on its own or as a reusable 
starting point for Web frameworks and testing libraries to build on. Most of its initial 
functionality is an extraction of Merb 1.0&#39;s request helpers feature.</p>

<h2 id="features">Features</h2>

<ul>
<li>Maintains a cookie jar across requests</li>
<li>Easily follow redirects when desired</li>
<li>Set request headers to be used by all subsequent requests</li>
<li>Small footprint. Approximately 200 LOC</li>
</ul>

<h3 id="examples">Examples</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">require &#39;rack/test&#39;

class HomepageTest &lt; Test::Unit::TestCase
  include Rack::Test::Methods
  
  def app
    MyApp.new
  end
  
  def test_redirect_logged_in_users_to_dashboard
    authorize &#39;bryan&#39;, &#39;secret&#39;
    get &#39;/&#39;
    follow_redirect!
    
    assert_equal &quot;http://example.org/redirected&quot;, last_request.url
    assert last_response.ok?
  end
  
end</code></pre></div>

<p>If you want to test one app in isolation, you just return that app as shown above. But if you want 
to test the entire app stack, including middlewares, cascades etc. you need to parse the app 
defined in config.ru.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">OUTER_APP = Rack::Builder.parse_file(&#39;config.ru&#39;).first

class TestApp &lt; Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    OUTER_APP
  end

  def test_root
    get &#39;/&#39;
    assert last_response.ok?
  end
  
end</code></pre></div>

<h2 id="install">Install</h2>

<p>To install the latest release as a gem:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">gem install rack-test</code></pre></div>

<p>Or via Bundler:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">gem &quot;rack-test&quot;, require: &quot;rack/test&quot;</code></pre></div>

        </div>

      </div>

      <div id="footer" class="row">
  <div class="col-md-12">
    <p>Project maintained by <a href="https://github.com/kematzy">kematzy</a></p>
    <p>Hosted on GitHub Pages &mdash; Design based upon a theme created by <a href="https://github.com/orderedlist">orderedlist</a></p>
  </div>
</div>


    </div>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <script src="/assets/js/jquery-2.1.3.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/highlight.pack.js"></script>
    <script src="/assets/js/toc.js"></script>
    <script src="/assets/js/anchor.min.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      $(document).ready(function() {
        
        // style the tables a bit better
        $('table').addClass('table table-bordered table-hover');
        // create a TOC
        $('#toc').toc({ listType: 'ul',  headers: 'h2, h3', showEffect: 'slideDown' });
        // add anchors & permalinks
        anchors.add('h1, h2, h3, h4');
        
        // $('.clickable-header').click(function({
        //
        // }));
      });
    </script>
  </body>
</html>
